<ng-container *ngIf="heroLoaded$ | async; else loading">
  <ng-container
    [ngTemplateOutlet]="showEditor ? heroForm : heroCard"
    [ngTemplateOutletContext]="{ hero: hero$ | async }"
  >
  </ng-container>
</ng-container>

<!-- card view -->
<ng-template #heroCard let-hero="hero">
  <div class="card">
    <!-- card main content -->
    <nx-demo-card-content
      [name]="hero.name"
      [description]="hero.description"
    ></nx-demo-card-content>

    <!-- card footer - delete and edit buttons -->
    <nx-demo-card-footer
      [item]="hero"
      (deleted)="askToDelete($event)"
      (selected)="editHero()"
    ></nx-demo-card-footer>
  </div>

  <!-- delete confirmation modal  -->
  <nx-demo-heroes-modal
    class="modal-hero"
    [message]="message"
    [isOpen]="showModal"
    (handleNo)="closeModal()"
    (handleYes)="deleteHero(hero.id)"
  ></nx-demo-heroes-modal>
</ng-template>

<!-- editor -->
<ng-template #heroForm let-hero="hero">
  <nx-demo-heroes-editor
    [hero]="hero"
    (cancel)="closeEditor()"
    (save)="saveHero($event)"
  ></nx-demo-heroes-editor>
</ng-template>

<!-- todo: fix -->
<!-- loading indicator -->
<ng-template #loading>
  <nx-demo-loading-indicator [pageLoaded]="heroLoaded$ | async"></nx-demo-loading-indicator>
</ng-template>
